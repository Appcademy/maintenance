<odoo>
  <data>

    <record id="add_purchase_order" model="ir.actions.act_window">
        <field name="name">Crea ordine richiesta manutenzione</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.order</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="purchase.purchase_order_form"/>
        <field name="view_type">form</field>
        <field name="context">{'default_maintenance_request_id': active_id,}</field>
    </record>

    <!--<record model="ir.ui.view" id="equipment_request_extended_view">
      	<field name="model">maintenance.request</field>
      	<field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"></field>
      	<field name="arch" type="xml">
			<xpath expr="//sheet//div" position="before">
				<div class="oe_button_box" name="button_box">
				<field name="thereIsPurchaseOrder" invisible="1" />
				<button name="%(add_purchase_order)d" type="action"
				string="Add purchase order" class="oe_stat_button oe_read_only" icon="fa-plus" attrs="{'invisible': [('thereIsPurchaseOrder', '=', 0)]}"/>
				<button name="goToPurchaseOrder" type="object"
				string="Show purchase order" class="oe_stat_button oe_read_only" icon="fa-cube" attrs="{'invisible': [('thereIsPurchaseOrder', '!=', 0)]}"/>
				</div>
      		</xpath>
      	</field>
    </record>-->

    <record model="ir.ui.view" id="hr_equipment_request_view_form_ext">
		<field name="name">equipment.request.form.inherit</field>
      	<field name="model">maintenance.request</field>
      	<field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"></field>
      	<field name="arch" type="xml">
			<xpath expr="//sheet//div" position="before">
				<div class="oe_button_box" name="button_box">
				<field name="thereIsPurchaseOrder" invisible="1" />
				<button name="%(add_purchase_order)d" type="action"
				string="Preventivo spesa" class="oe_stat_button oe_read_only" icon="fa-plus" attrs="{'invisible': [('thereIsPurchaseOrder', '=', True)]}"/>
				<button name="goToPurchaseOrder" type="object"
				string="Preventivo spesa" class="oe_stat_button oe_read_only" icon="fa-cube" attrs="{'invisible': [('thereIsPurchaseOrder', '=', False)]}"/>
				</div>
      		</xpath>
      	</field>
    </record>

	<record id="hr_equipment_request_view_form" model="ir.ui.view">
        <field name="name">equipment.request.form.inherit</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form" />
        <field name="arch" type="xml">
            <field name="maintenance_type" position="after">
				    <field name="purchase_order_ids" invisible="1" />
            </field>
        </field>
    </record>

	<record id="purchase_order_form" model="ir.ui.view">
        <field name="name">purchase.order.form.inherit</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form" />
        <field name="arch" type="xml">
            <field name="partner_id" position="before">
                <field name="maintenance_request_id" invisible="1" />
            </field>
        </field>
    </record>

  </data>
</odoo>
