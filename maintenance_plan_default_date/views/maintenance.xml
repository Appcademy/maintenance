<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="maintenance_kind_extended_view_tree" model="ir.ui.view">
    <field name="inherit_id" ref="maintenance_plan.maintenance_kind_view_tree" />
    <field name="name">maintenance.kind.tree.extended</field>
    <field name="model">maintenance.kind</field>
    <field name="arch" type="xml">
      <field name="name" position="after">
        <field name="default_period" />
      </field>
    </field>
  </record>

  <record id="equipment_extended_view_tree" model="ir.ui.view">
    <field name="inherit_id" ref="hr_maintenance.maintenance_equipment_view_tree_inherit_hr" />
    <field name="name">equipment.tree.extended</field>
    <field name="model">maintenance.equipment</field>
    <field name="arch" type="xml">
      <field name="employee_id" position="replace">
        <field name="next_action_date"
          options='{"bg_color": "rgba(0,180,0,.3);rgba(180,180,0,.3):maintenance_approaching &lt; 30;rgba(180,0,0,.3):maintenance_approaching &lt; 0;rgba(0,0,0,.3):maintenance_approaching == -1000;"}'/>
          <field name="last_date"
            options='{"bg_color": "rgba(0,180,0,.3);rgba(180,180,0,.3):last_outcome == &apos;w&apos;;rgba(180,0,0,.3):last_outcome == &apos;nc&apos;;rgba(0,0,0,1):last_outcome == &apos;o&apos;;rgba(0,0,0,.3):last_outcome == False;","color":"white:last_outcome == &apos;o&apos;;"}'/>
            <field name="maintenance_approaching" invisible="1"/>
            <field name="last_outcome" invisible="1"/>
          </field>
        </field>
      </record>

      <record id="hr_equipment_request_outcome_view_form" model="ir.ui.view">
        <field name="name">equipment.request.outcome.form.inherit</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form" />
        <field name="arch" type="xml">
          <field name="priority" position="after">
            <field name="outcome" />
          </field>
        </field>
      </record>

      <record model="ir.actions.act_window" id="add_maintenance_request">
        <field name="name">Crea richiesta manutenzione</field>
        <field name="res_model">maintenance.request</field>
        <field name="view_mode">form</field>
        <!-- <field name="domain">[('active_id','=',active_id)]</field> -->
        <!-- <field name="context">{'group_by':['partner_id','product_tmpl_id','colore']}</field> -->
        <field name="target">current</field>
      </record>

      <record model="ir.ui.view" id="equipment_extended_view_filter">
      	<field name="model">maintenance.equipment</field>
      	<field name="inherit_id" ref="maintenance.hr_equipment_view_search"></field>
      	<field name="arch" type="xml">
      		<xpath expr="//search//field[@name='name']" position="before">
					<field name="serial_no"/>
      		</xpath>
      	</field>
      </record>
      
      <record model="ir.ui.view" id="equipment_extended_view">
      	<field name="model">maintenance.equipment</field>
      	<field name="inherit_id" ref="maintenance.hr_equipment_view_form"></field>
      	<field name="arch" type="xml">
      		<xpath expr="//div//button[@name='162']" position="before">
					<button name="add_maintenance_request" type="action" 
      					string="Add Request" class="oe_stat_button" icon="fa-plus"/>
      		</xpath>
      	</field>
      </record>

      <record model="ir.ui.view" id="request_extended_view_filter">
      	<field name="model">maintenance.request</field>
      	<field name="inherit_id" ref="maintenance.hr_equipment_request_view_search"></field>
      	<field name="arch" type="xml">
      		<search>
      			<group>
      				<filter string="Equipment" domain="[]" context="{'group_by': 'equipment_id'}" />
      				<filter string="Maintenance type" domain="[]" context="{'group_by': 'maintenance_type'}" />
      				<filter string="Maintenance kind" domain="[]" context="{'group_by': 'maintenance_kind_id'}" />
      			</group>
      		</search>
      	</field>
      </record>

  <!--    <record model="ir.ui.view" id="equipment_extended_make_mr_box_button">
        <field name="name">maintenance.equipment.checklist_box</field>
        <field name="model">maintenance.equipment</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
        <field name="arch" type="xml">
          <data>
            <div name="button_box" position="inside">
              <button type="action" name="%(equipment_extended_make_mr)d"
                class="oe_stat_button" icon="fa-cubes">
                <div class="o_form_field o_stat_info">
                  <span class="o_stat_text">Crea richiesta manutenzione</span>
                </div>
              </button>
            </div>
          </data>
        </field>
      </record>
-->

    </odoo>
